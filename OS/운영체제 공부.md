# 운영체제 공부

## 1.1 운영체제의 정의

### 운영체제란?

+ 컴퓨터 하드웨어(프로세서, 메모리, 디스크 등)을 잘 관리하여 큰 두가지 목적을 달성하는 프로그램
  1. 성능을 높인다.
     + 같은 하드웨어라도 os가 좋으면 더 좋게 사용 가능하다
  2. 사용자에게 편의성을 제공한다.
     + GUI 환영으로 쉽게 사용자가 접근 가능하다
+ 쉽게 말하면 컴퓨터 하드웨어를 관리하는 프로그램이다.



### 운영체제가 없다면?

+ 컴퓨터는 크게 프로세서와 메모리로 존재한다. 메모리는 각 순서에 따라 프로그램을 적재하고 실행시키는데 이 체계적인 순서가 사라진다.
+ 사용자가 프로그램을 사용할 때에는 하드디스크에 있는 프로그램을 메모리로 올려서 사용하게 되는데, os가 없다면 메모리로 올릴 수 없다.
+ 마찬가지로 여러개의 프로그램을 동시 실행시킬수도 없다.
+ 프린터도 사용 불가하며, 하드디스크에 저장도 불가하다.

<b>os가 없으면 메모리 안에는 임의의, 멋대로 들어있는 엉터리 값들이 존재한다. 사용이 불가능 한 상태의 폭주하는 컴퓨터가 되버린다.</b>



### 운영체제의 역할

+ 하드웨어를 관리하는 역할을 주로 한다.
+ 또한 사용자의 의도대로 프로그램을 실행시켜주는 명령 해석기의 역할을 한다.



### 운영체제의 시작 위치 (BOOT)

+ 컴퓨터의 메인 메모리에는 휘발성 메모리인 RAM과 비휘발성 메모리인 ROM이 존재한다. 컴퓨터에 전원이 들어오게 되면 프로세서는 가장 먼저 ROM을 읽게된다.
  1. POST(power-on self-test)프로그램을 실행한다.
     + 컴퓨터에 이상이 있는지 사용 환경을 체크한다.
  2. 부트로더(Boot loader)
     + 하드디스크에 설치되어 있는 os의 위치를 찾아 메인 메모리 RAM으로 가져온다. 
     + 이 과정을 부팅이라고 한다.
+ 부팅이 되면 각 os에 맞는 화면이 뜨게 된다. 윈도우라면 바탕화면과 아이콘, 리눅스라면 로그인 화면 등이 뜨게 된다.
+ os가 RAM에 올라오면 언제 사라질까?
  + 다른 프로그램들은 실행시 RAM에 올라가고 종료시 사라지게 된다.
  + 그러나 OS는 부팅 시 RAM에 올라오게 되며 전원이 끊어질 때 사라지게 된다.
    + 이 때문에 OS를 메모리의 resident라 부른다.



### 운영체제 = kernel + shell

+ 운영체제는 kernel과 shell로 이루어져있다.
+ kernel : 하드웨어와 밀접하게 관계있으며, 직접 하드웨어를 관리한다.
+ shell(명령해석기(command interpreter)) : 사용자의 명령을 받고 해석해 해당 명령을 실행한다.



+ 일반적으로 '운영체제를 사용한다', '운영체제를 안다'고 하는 것은 shell의 사용을 말하는 것이며, 이 강의에서는 shell이 아닌 kernel의 사용을 공부할것이다.



### 운영체제의 위치

+ 운영체제는 하드웨어 -> 운영체제 -> 애플리케이션 순으로 나열할 수 있다.
+ 과녁판과 같은 모양의 한 가운데가 하드웨어, 그 바깥쪽이 운영체제, 그 바깥쪽을 어플리케이션이 차지한다.



### 운영체제와 정부의 유사점

+ 운영체제는 자원 관리자(resource manager) 또는 자원 할당자(resource allocator)라고 부른다.
+ 주어진 자원을 어떻게 가장 잘 활용할 지 계산하고 관리한다.
+ 운영체제가 직접 개입하지는 않지만, 각 자원을 어떻게 할당해야할지 계획하고 관리하게 된다.





## 1.2 운영체제의 역사

### 0. No O/S

+ 컴퓨터 구조 : 카드 리더 / 메모리 / 프로세서 / 프린터
+ 프로그래머가 연필로 프로그램을 작성하면 오퍼레이터가 카드를 만들어서 메모리에 올린다. 또한 프로그램이 실행될 수 있는 일련의 과정(컴파일 등...)을 오퍼레이터가 한다.
  + 오퍼레이터 : 컴퓨터를 사용할 수 있는 사람. 사람이 원하는 대로 프로그래밍 하기 위해 컴퓨터에게 해당 일을 수행할 수 있도록 만드는 직업
+ 1940년대 ~ 50년대



### 1. Batch processing system (일괄처리시스템)

+ 컴퓨터 구조 : 카드 리더 / 메모리 / 프로세서 / 프린터
+ 오퍼레이터가 해야하는 작업(컴파일, 링커, 로딩 등)을 일괄적으로 묶어(batch) 프로그램으로 만든다. 이 프로그램을 메모리 안에 적재.
  + 다시 말하면, 컴파일, 링커, 로딩 등의 항상 하는 일을 메모리에 넣는다.
  + 이 일이 OS가 되며, 이것은 항상 상주하는 묶음의 일이기 때문에 **resident monitor** 라는 기술이라고도 한다.
+ 이 때 메모리에는 OS가 올라가며, 1개의 User 프로그램만 동작시킬 수 있다.



### 2. Multiprogramming system (다중프로그래밍 시스템)

+ 컴퓨터 구조 : 카드 리더 / 메모리 / 프로세서(cpu) / 프린터
+ 배경 : 하드디스크가 사용되고, 메인 메모리의 용량이 커지며 CPU의 속도가 빨라졌다. 그에 비해 I/O(입출력)은 느린 차이를 이용하게 된다.
+ 여러개의 user program을 사용할 수 있게 한다. 
  + 1개의 프로그램 실행 시 프로그램은 CPU(계산)과 I/O(입 출력)을 번갈아 사용하게 된다. I/O를 하는 동안 귀중한 자원인 CPU가 놀게되는데(== CPU idle), 이 순간에도 다른 프로그램을 실행시켜 CPU idle 시간을 줄인다.
  + 3개의 프로그램 실행 시,
    + 1번 cpu 사용 
    + 1번 i/o 사용 -> 2번 cpu 사용
    + 2번 i/o 사용 -> 3번 cpu 사용
    + 3번 i/o 사용 -> 1번 cpu 사용
  + 어느 순간에도 cpu가 놀지 못하도록 스위칭 하며 idle time을 줄인다.
+ 기술 발전 
  + CPU scheduling : 메인 메모리에 있는 user 프로그램 중 무엇을 먼저 실행하는 것 이 최고 성능일까?
  + 메모리 관리 : user 프로그램을 어떻게 둬야할까? 한칸씩 띄워가며 프로그램 메모리 주소를 줘야할까? 아예 다른 곳에 두는 게 좋을까?
  + 보호 : 여러개의 프로그램을 동시에 실행시키게 될 때, 같은 이름의 변수 사용등의 문제로 다른 프로그램에 영향을 미치게 되는 것을 막아야한다.



### 3. Time-sharing system (시공유 시스템)

+ 컴퓨터 구조 
  + 하나의 메인 컴퓨터 - 메모리 / 프로세서 / 등...
  + 여러개의 단말기(Terminal) - 모니터와 키보드만 존재. == 한명의 user
+ 배경 : 모니커와 키보드의 등장 = interactive system(대화형 시스템) 가능.
+ 여러명의 User가 사용 가능하게 한다.
  + 멀티프로그래밍을 활용하여 user를 할당하게 되면 cpu가 하나이기 때문에 한명이 cpu를 사용하는 동안에는 다른 user들은 컴퓨터를 사용하지 못한다.
  + 때문에 아주 짧은 시간동안 cpu를 할당하는 것을 반복하여 모든 user들이 동시에 컴퓨터를 하고 있는 것 처럼 만든다.
  + 1/100초 ~ 1/1000초에 한번 씩 user1, user2, user3, user1, user2, user3, ... 의 순서(는 바뀔 수 있음)로 스위칭하며 cpu를 할당한다. => 이 방법을 강제절환이라 한다.
+ 기술 발전
  + 가상 메모리 : 사용자가 많아지며 메인 메모리가 부족해진다. 이 때 하드디스크의 일부를 메인 메모리처럼 사용하는 방법이다.
  + 프로세스간 통신 : 하나의 컴퓨터 안에서 각각의 터미널을 연결하여 통신을 가능하게 한다.
  + 동기화(synchronizaton) : 어떤 것을 먼저 실행하고 나중에 실행할것인가?
+ TSS는 가장 최근까지도 사용되고 있는 운영체제이다.
+ ex) windows 7, 8, xp, ..., Unix(최초의 TSS), Linux(Unix이후버전) ,....





### OS 기술 변화

+ 컴퓨터 규모 별 분류
  + supercomputer > mainframe > mini > micro  => 70~80s 구분
  + Supercomputer > Server > Workstation > PC > Handheld > Embedded
    + Supercomputer : 요즘에도 사용된다. 기상청 은행 등 대규모 작업
    + Server : 하나의 네트워크에 여러개 존재한다. 대학교 수강신청 등의 규모 작업을 진행한다.  ex) DB server, Web server, Video server 등
    + Workstation : PC 보다 큰 규모의 작업을 하기 위해 존재한다.
    + PC : 우리가 사용하는 컴퓨터. 하나의 네트워크 아래에 아주 많은 수의 PC가 존재한다.
    + Handheld : 노트북, 태블릿 PC, 스마트폰 등
    + Embedded : 자동차, 밥솥, 냉장고, 세탁기 등 우리 눈에는 보이지 않지만 전자기기를 제어하는 역할을 한다.
+ 위에서 설명한 3가지의 os 시스템은 대규모 컴퓨터부터 순서대로 적용되며 pc, handheld 에도 적용되고, embedded 에도 적용되고 있다.